!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlazorStateName="BlazorState",t.DevToolsName="devTools",t.InitializeJavaScriptInteropName="InitializeJavaScriptInterop",t.JsonRequestHandlerMethodName="Handle",t.JsonRequestHandlerName="jsonRequestHandler",t.ReduxDevToolsFactoryName="ReduxDevToolsFactory",t.ReduxDevToolsName="reduxDevTools",t.ReduxExtentionName="__REDUX_DEVTOOLS_EXTENSION__"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(2),s=o(3),i=o(0);function a(e){console.log("InitializeJavaScriptInterop"),window[i.JsonRequestHandlerName]=e}function r(){const e=new s.ReduxDevTools;return window[i.ReduxDevToolsName]=e,e.IsEnabled}console.log("Initialize BlazorState"),"undefined"==typeof window||window[i.BlazorStateName]||(window[i.BlazorStateName]=new n.BlazorState,window[i.ReduxDevToolsFactoryName]=r,window[i.InitializeJavaScriptInteropName]=a)},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?s(e.value):new o(function(t){t(e.value)}).then(a,r)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0);t.BlazorState=class{DispatchRequest(e,t){return n(this,void 0,void 0,function*(){const o=JSON.stringify(t);console.log(`Dispatching request of Type ${e}: ${o}`),yield window[s.JsonRequestHandlerName].invokeMethodAsync(s.JsonRequestHandlerMethodName,e,o)})}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.ReduxDevTools=class{constructor(){this.MessageHandler=(e=>{console.log("ReduxDevTools.MessageHandler"),console.log(e);const t=this.MapRequestType(e);t?this.BlazorState.DispatchRequest(t,e):console.log("messages of this type are currently not supported")}),this.BlazorState=window[n.BlazorStateName],this.Config={name:"Blazor State",features:{pause:!1,lock:!1,persist:!1,export:!1,import:!1,jump:!0,skip:!1,reorder:!1,dispatch:!1,test:!1}},this.Extension=this.GetExtension(),this.DevTools=this.GetDevTools(),this.IsEnabled=!!this.DevTools,this.Init()}Init(){this.IsEnabled&&(this.DevTools.subscribe(this.MessageHandler),window[n.DevToolsName]=this.DevTools)}GetExtension(){const e=window[n.ReduxExtentionName];return e||console.log("Redux DevTools are not installed."),e}GetDevTools(){const e=this.Extension&&this.Extension.connect(this.Config);return e||console.log("Unable to connect to Redux DevTools."),e}MapRequestType(e){var t,o={COMMIT:void 0,IMPORT_STATE:void 0,JUMP_TO_ACTION:"BlazorState.Pipeline.ReduxDevTools.Features.JumpToState.JumpToStateRequest",JUMP_TO_STATE:"BlazorState.Pipeline.ReduxDevTools.Features.JumpToState.JumpToStateRequest",RESET:void 0,ROLLBACK:void 0,TOGGLE_ACTION:void 0};switch(e.type){case"START":t="BlazorState.Pipeline.ReduxDevTools.Features.Start.StartRequest";break;case"STOP":break;case"DISPATCH":t=o[e.payload.type]}return t&&console.log(`Redux Dev tools type: ${e.type} maps to ${t}`),t}ReduxDevToolsDispatch(e,t){return"init"===e?window[n.DevToolsName].init(t):window[n.DevToolsName].send(e,t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvSW5pdGlhbGl6ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQmxhem9yU3RhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1JlZHV4RGV2VG9vbHMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJCbGF6b3JTdGF0ZU5hbWUiLCJEZXZUb29sc05hbWUiLCJJbml0aWFsaXplSmF2YVNjcmlwdEludGVyb3BOYW1lIiwiSnNvblJlcXVlc3RIYW5kbGVyTWV0aG9kTmFtZSIsIkpzb25SZXF1ZXN0SGFuZGxlck5hbWUiLCJSZWR1eERldlRvb2xzRmFjdG9yeU5hbWUiLCJSZWR1eERldlRvb2xzTmFtZSIsIlJlZHV4RXh0ZW50aW9uTmFtZSIsIkJsYXpvclN0YXRlXzEiLCJSZWR1eERldlRvb2xzXzEiLCJDb25zdGFudHNfMSIsIkluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcCIsIkpzb25SZXF1ZXN0SGFuZGxlciIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJSZWR1eERldlRvb2xzRmFjdG9yeSIsInJlZHV4RGV2VG9vbHMiLCJSZWR1eERldlRvb2xzIiwiSXNFbmFibGVkIiwiQmxhem9yU3RhdGUiLCJbb2JqZWN0IE9iamVjdF0iLCJyZXF1ZXN0VHlwZUZ1bGxOYW1lIiwicmVxdWVzdCIsInJlcXVlc3RBc0pzb24iLCJKU09OIiwic3RyaW5naWZ5IiwiaW52b2tlTWV0aG9kQXN5bmMiLCJ0aGlzIiwiTWVzc2FnZUhhbmRsZXIiLCJtZXNzYWdlIiwicmVxdWVzdFR5cGUiLCJNYXBSZXF1ZXN0VHlwZSIsIkRpc3BhdGNoUmVxdWVzdCIsIkNvbmZpZyIsImZlYXR1cmVzIiwicGF1c2UiLCJsb2NrIiwicGVyc2lzdCIsImV4cG9ydCIsImltcG9ydCIsImp1bXAiLCJza2lwIiwicmVvcmRlciIsImRpc3BhdGNoIiwidGVzdCIsIkV4dGVuc2lvbiIsIkdldEV4dGVuc2lvbiIsIkRldlRvb2xzIiwiR2V0RGV2VG9vbHMiLCJJbml0Iiwic3Vic2NyaWJlIiwiZXh0ZW5zaW9uIiwiZGV2VG9vbHMiLCJjb25uZWN0IiwiYmxhem9yUmVxdWVzdFR5cGUiLCJkaXNwYXRjaFJlcXVlc3RzIiwiQ09NTUlUIiwidW5kZWZpbmVkIiwiSU1QT1JUX1NUQVRFIiwiSlVNUF9UT19BQ1RJT04iLCJKVU1QX1RPX1NUQVRFIiwiUkVTRVQiLCJST0xMQkFDSyIsIlRPR0dMRV9BQ1RJT04iLCJ0eXBlIiwicGF5bG9hZCIsImFjdGlvbiIsInN0YXRlIiwiaW5pdCIsInNlbmQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxF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bGF6b3JzdGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImV4cG9ydCBjb25zdCBCbGF6b3JTdGF0ZU5hbWU6IHN0cmluZyA9ICdCbGF6b3JTdGF0ZSc7XHJcbmV4cG9ydCBjb25zdCBEZXZUb29sc05hbWU6IHN0cmluZyA9ICdkZXZUb29scyc7XHJcbmV4cG9ydCBjb25zdCBJbml0aWFsaXplSmF2YVNjcmlwdEludGVyb3BOYW1lOiBzdHJpbmcgPSAnSW5pdGlhbGl6ZUphdmFTY3JpcHRJbnRlcm9wJztcclxuZXhwb3J0IGNvbnN0IEpzb25SZXF1ZXN0SGFuZGxlck1ldGhvZE5hbWU6IHN0cmluZyA9ICdIYW5kbGUnO1xyXG5leHBvcnQgY29uc3QgSnNvblJlcXVlc3RIYW5kbGVyTmFtZTogc3RyaW5nID0gJ2pzb25SZXF1ZXN0SGFuZGxlcic7XHJcbmV4cG9ydCBjb25zdCBSZWR1eERldlRvb2xzRmFjdG9yeU5hbWU6IHN0cmluZyA9ICdSZWR1eERldlRvb2xzRmFjdG9yeSc7XHJcbmV4cG9ydCBjb25zdCBSZWR1eERldlRvb2xzTmFtZTogc3RyaW5nID0gXCJyZWR1eERldlRvb2xzXCI7XHJcbmV4cG9ydCBjb25zdCBSZWR1eEV4dGVudGlvbk5hbWU6IHN0cmluZyA9ICdfX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fJztcclxuIiwiaW1wb3J0IHsgQmxhem9yU3RhdGUgfSBmcm9tICcuL0JsYXpvclN0YXRlJztcclxuaW1wb3J0IHsgUmVkdXhEZXZUb29sc30gZnJvbSAnLi9SZWR1eERldlRvb2xzJztcclxuaW1wb3J0IHtcclxuICBCbGF6b3JTdGF0ZU5hbWUsXHJcbiAgSW5pdGlhbGl6ZUphdmFTY3JpcHRJbnRlcm9wTmFtZSxcclxuICBKc29uUmVxdWVzdEhhbmRsZXJOYW1lLFxyXG4gIFJlZHV4RGV2VG9vbHNGYWN0b3J5TmFtZSxcclxuICBSZWR1eERldlRvb2xzTmFtZSxcclxufSBmcm9tICcuL0NvbnN0YW50cyc7XHJcblxyXG5mdW5jdGlvbiBJbml0aWFsaXplKCkge1xyXG4gIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6ZSBCbGF6b3JTdGF0ZVwiKTtcclxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpbmRvd1tCbGF6b3JTdGF0ZU5hbWVdKSB7XHJcbiAgICB3aW5kb3dbQmxhem9yU3RhdGVOYW1lXSA9IG5ldyBCbGF6b3JTdGF0ZSgpO1xyXG4gICAgd2luZG93W1JlZHV4RGV2VG9vbHNGYWN0b3J5TmFtZV0gPSBSZWR1eERldlRvb2xzRmFjdG9yeTtcclxuICAgIHdpbmRvd1tJbml0aWFsaXplSmF2YVNjcmlwdEludGVyb3BOYW1lXSA9IEluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcChKc29uUmVxdWVzdEhhbmRsZXIpIHtcclxuICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcFwiKTtcclxuICB3aW5kb3dbSnNvblJlcXVlc3RIYW5kbGVyTmFtZV0gPSBKc29uUmVxdWVzdEhhbmRsZXI7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBSZWR1eERldlRvb2xzRmFjdG9yeSgpOiBib29sZWFuIHtcclxuICBjb25zdCByZWR1eERldlRvb2xzID0gbmV3IFJlZHV4RGV2VG9vbHMoKTtcclxuICB3aW5kb3dbUmVkdXhEZXZUb29sc05hbWVdID0gcmVkdXhEZXZUb29scztcclxuICByZXR1cm4gcmVkdXhEZXZUb29scy5Jc0VuYWJsZWQ7XHJcbn1cclxuXHJcbkluaXRpYWxpemUoKTsiLCJpbXBvcnQgeyAgSnNvblJlcXVlc3RIYW5kbGVyTWV0aG9kTmFtZSwgSnNvblJlcXVlc3RIYW5kbGVyTmFtZSB9IGZyb20gJy4vQ29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCbGF6b3JTdGF0ZSB7XHJcbiAgYXN5bmMgRGlzcGF0Y2hSZXF1ZXN0KHJlcXVlc3RUeXBlRnVsbE5hbWU6IHN0cmluZywgcmVxdWVzdDogYW55ICkge1xyXG4gICAgY29uc3QgcmVxdWVzdEFzSnNvbiA9IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGBEaXNwYXRjaGluZyByZXF1ZXN0IG9mIFR5cGUgJHtyZXF1ZXN0VHlwZUZ1bGxOYW1lfTogJHtyZXF1ZXN0QXNKc29ufWApO1xyXG4gICAgYXdhaXQgd2luZG93W0pzb25SZXF1ZXN0SGFuZGxlck5hbWVdLmludm9rZU1ldGhvZEFzeW5jKEpzb25SZXF1ZXN0SGFuZGxlck1ldGhvZE5hbWUsIHJlcXVlc3RUeXBlRnVsbE5hbWUsIHJlcXVlc3RBc0pzb24pO1xyXG4gIH1cclxufSIsImltcG9ydCB7IEJsYXpvclN0YXRlLCB9IGZyb20gJy4vQmxhem9yU3RhdGUnO1xyXG5pbXBvcnQgeyBCbGF6b3JTdGF0ZU5hbWUsIFJlZHV4RXh0ZW50aW9uTmFtZSwgRGV2VG9vbHNOYW1lLCBSZWR1eERldlRvb2xzTmFtZSB9IGZyb20gJy4vQ29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZWR1eERldlRvb2xzIHtcclxuICBJc0VuYWJsZWQ6IGJvb2xlYW47XHJcbiAgRGV2VG9vbHM6IGFueTtcclxuICBFeHRlbnNpb246IGFueTtcclxuICBDb25maWc6IHsgbmFtZTogc3RyaW5nOyBmZWF0dXJlczogeyBwYXVzZTogYm9vbGVhbjsgbG9jazogYm9vbGVhbjsgcGVyc2lzdDogYm9vbGVhbjsgZXhwb3J0OiBib29sZWFuOyBpbXBvcnQ6IGJvb2xlYW47IGp1bXA6IGJvb2xlYW47IHNraXA6IGJvb2xlYW47IHJlb3JkZXI6IGJvb2xlYW47IGRpc3BhdGNoOiBib29sZWFuOyB0ZXN0OiBib29sZWFuOyB9OyB9O1xyXG4gIEJsYXpvclN0YXRlOiBCbGF6b3JTdGF0ZTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLkJsYXpvclN0YXRlID0gd2luZG93W0JsYXpvclN0YXRlTmFtZV07IC8vIERlcGVuZHMgb24gdGhpcyBmdW5jdGlvbmFsaXR5XHJcbiAgICB0aGlzLkNvbmZpZyA9IHtcclxuICAgICAgbmFtZTogJ0JsYXpvciBTdGF0ZScsXHJcbiAgICAgIGZlYXR1cmVzOiB7XHJcbiAgICAgICAgcGF1c2U6IGZhbHNlLCAvLyBzdGFydC9wYXVzZSByZWNvcmRpbmcgb2YgZGlzcGF0Y2hlZCBhY3Rpb25zXHJcbiAgICAgICAgbG9jazogZmFsc2UsIC8vIGxvY2svdW5sb2NrIGRpc3BhdGNoaW5nIGFjdGlvbnMgYW5kIHNpZGUgZWZmZWN0c1xyXG4gICAgICAgIHBlcnNpc3Q6IGZhbHNlLCAvLyBwZXJzaXN0IHN0YXRlcyBvbiBwYWdlIHJlbG9hZGluZ1xyXG4gICAgICAgIGV4cG9ydDogZmFsc2UsIC8vIGV4cG9ydCBoaXN0b3J5IG9mIGFjdGlvbnMgaW4gYSBmaWxlXHJcbiAgICAgICAgaW1wb3J0OiBmYWxzZSwgLy8gaW1wb3J0IGhpc3Rvcnkgb2YgYWN0aW9ucyBmcm9tIGEgZmlsZVxyXG4gICAgICAgIGp1bXA6IHRydWUsIC8vIGp1bXAgYmFjayBhbmQgZm9ydGggKHRpbWUgdHJhdmVsaW5nKVxyXG4gICAgICAgIHNraXA6IGZhbHNlLCAvLyBza2lwIChjYW5jZWwpIGFjdGlvbnNcclxuICAgICAgICByZW9yZGVyOiBmYWxzZSwgLy8gZHJhZyBhbmQgZHJvcCBhY3Rpb25zIGluIHRoZSBoaXN0b3J5IGxpc3RcclxuICAgICAgICBkaXNwYXRjaDogZmFsc2UsIC8vIGRpc3BhdGNoIGN1c3RvbSBhY3Rpb25zIG9yIGFjdGlvbiBjcmVhdG9yc1xyXG4gICAgICAgIHRlc3Q6IGZhbHNlIC8vIGdlbmVyYXRlIHRlc3RzIGZvciB0aGUgc2VsZWN0ZWQgYWN0aW9uc1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5FeHRlbnNpb24gPSB0aGlzLkdldEV4dGVuc2lvbigpO1xyXG4gICAgdGhpcy5EZXZUb29scyA9IHRoaXMuR2V0RGV2VG9vbHMoKTtcclxuICAgIHRoaXMuSXNFbmFibGVkID0gdGhpcy5EZXZUb29scyA/IHRydWUgOiBmYWxzZTtcclxuICAgIHRoaXMuSW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgSW5pdCgpIHtcclxuICAgIGlmICh0aGlzLklzRW5hYmxlZCkge1xyXG4gICAgICB0aGlzLkRldlRvb2xzLnN1YnNjcmliZSh0aGlzLk1lc3NhZ2VIYW5kbGVyKTtcclxuICAgICAgd2luZG93W0RldlRvb2xzTmFtZV0gPSB0aGlzLkRldlRvb2xzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgR2V0RXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgZXh0ZW5zaW9uID0gd2luZG93W1JlZHV4RXh0ZW50aW9uTmFtZV07XHJcblxyXG4gICAgaWYgKCFleHRlbnNpb24pIHtcclxuICAgICAgY29uc29sZS5sb2coJ1JlZHV4IERldlRvb2xzIGFyZSBub3QgaW5zdGFsbGVkLicpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGV4dGVuc2lvbjtcclxuICB9XHJcblxyXG4gIEdldERldlRvb2xzKCkge1xyXG4gICAgY29uc3QgZGV2VG9vbHMgPSB0aGlzLkV4dGVuc2lvbiAmJiB0aGlzLkV4dGVuc2lvbi5jb25uZWN0KHRoaXMuQ29uZmlnKTtcclxuICAgIGlmICghZGV2VG9vbHMpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1VuYWJsZSB0byBjb25uZWN0IHRvIFJlZHV4IERldlRvb2xzLicpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRldlRvb2xzO1xyXG4gIH1cclxuXHJcbiAgTWFwUmVxdWVzdFR5cGUobWVzc2FnZSkge1xyXG4gICAgdmFyIGRpc3BhdGNoUmVxdWVzdHMgPSB7XHJcbiAgICAgICdDT01NSVQnOiB1bmRlZmluZWQsXHJcbiAgICAgICdJTVBPUlRfU1RBVEUnOiB1bmRlZmluZWQsXHJcbiAgICAgICdKVU1QX1RPX0FDVElPTic6ICdCbGF6b3JTdGF0ZS5QaXBlbGluZS5SZWR1eERldlRvb2xzLkZlYXR1cmVzLkp1bXBUb1N0YXRlLkp1bXBUb1N0YXRlUmVxdWVzdCcsXHJcbiAgICAgICdKVU1QX1RPX1NUQVRFJzogJ0JsYXpvclN0YXRlLlBpcGVsaW5lLlJlZHV4RGV2VG9vbHMuRmVhdHVyZXMuSnVtcFRvU3RhdGUuSnVtcFRvU3RhdGVSZXF1ZXN0JyxcclxuICAgICAgJ1JFU0VUJzogdW5kZWZpbmVkLFxyXG4gICAgICAnUk9MTEJBQ0snOiB1bmRlZmluZWQsXHJcbiAgICAgICdUT0dHTEVfQUNUSU9OJzogdW5kZWZpbmVkXHJcbiAgICB9O1xyXG4gICAgdmFyIGJsYXpvclJlcXVlc3RUeXBlO1xyXG4gICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcclxuICAgICAgY2FzZSAnU1RBUlQnOlxyXG4gICAgICAgIGJsYXpvclJlcXVlc3RUeXBlID0gJ0JsYXpvclN0YXRlLlBpcGVsaW5lLlJlZHV4RGV2VG9vbHMuRmVhdHVyZXMuU3RhcnQuU3RhcnRSZXF1ZXN0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnU1RPUCc6XHJcbiAgICAgICAgLy9ibGF6b3JSZXF1ZXN0VHlwZSA9ICdCbGF6b3JTdGF0ZS5QaXBlbGluZS5SZWR1eERldlRvb2xzLkZlYXR1cmVzLlN0b3AuU3RvcFJlcXVlc3QnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdESVNQQVRDSCc6XHJcbiAgICAgICAgYmxhem9yUmVxdWVzdFR5cGUgPSBkaXNwYXRjaFJlcXVlc3RzW21lc3NhZ2UucGF5bG9hZC50eXBlXTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGJsYXpvclJlcXVlc3RUeXBlICYmXHJcbiAgICAgIGNvbnNvbGUubG9nKGBSZWR1eCBEZXYgdG9vbHMgdHlwZTogJHttZXNzYWdlLnR5cGV9IG1hcHMgdG8gJHtibGF6b3JSZXF1ZXN0VHlwZX1gKTtcclxuXHJcbiAgICByZXR1cm4gYmxhem9yUmVxdWVzdFR5cGU7XHJcbiAgfVxyXG5cclxuICBNZXNzYWdlSGFuZGxlciA9IChtZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnUmVkdXhEZXZUb29scy5NZXNzYWdlSGFuZGxlcicpO1xyXG4gICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICB2YXIganNvblJlcXVlc3Q7XHJcbiAgICBjb25zdCByZXF1ZXN0VHlwZSA9IHRoaXMuTWFwUmVxdWVzdFR5cGUobWVzc2FnZSk7XHJcbiAgICBpZiAocmVxdWVzdFR5cGUpIHsgLy8gSWYgd2UgZG9uJ3QgbWFwIHRoaXMgdHlwZSB0aGVuIHRoZXJlIGlzIG5vdGhpbmcgdG8gZGlzcGF0Y2gganVzdCBpZ25vcmUuXHJcbiAgICAgIGpzb25SZXF1ZXN0ID0ge1xyXG4gICAgICAgIC8vIFRPRE86IG1ha2Ugc3VyZSBub24gUmVxdWVzdHMgZnJvbSBhc3NlbWJsaWVzIG90aGVyIHRoYW4gQmxhem9yU3RhdGUgYWxzbyB3b3JrLlxyXG4gICAgICAgIFJlcXVlc3RUeXBlOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICBQYXlsb2FkOiBtZXNzYWdlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLkJsYXpvclN0YXRlLkRpc3BhdGNoUmVxdWVzdChyZXF1ZXN0VHlwZSwgbWVzc2FnZSk7XHJcbiAgICB9IGVsc2VcclxuICAgICAgY29uc29sZS5sb2coYG1lc3NhZ2VzIG9mIHRoaXMgdHlwZSBhcmUgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWRgKTtcclxuICB9XHJcblxyXG4gIFJlZHV4RGV2VG9vbHNEaXNwYXRjaChhY3Rpb24sIHN0YXRlKSB7XHJcbiAgICBpZiAoYWN0aW9uID09PSAnaW5pdCcpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvd1tEZXZUb29sc05hbWVdLmluaXQoc3RhdGUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3dbRGV2VG9vbHNOYW1lXS5zZW5kKGFjdGlvbiwgc3RhdGUpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=